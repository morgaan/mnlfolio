<?
	/* 
		DESCRIPTION: A very simple layout with the set thumbnails as navigation items and set title displayed
		AUTHOR: morgan cugerone
		VERSION: 1.0 
	*/

	$layout = "";

	$layout .="	<table border=\"0\" cellpadding=\"1\" align=\"center\" >";
	$layout .="		<tr>";
	$layout .="			<td align=\"center\">";
	$layout .="		    	&nbsp;<b>$delimiter</b>&nbsp;";
	$layout .="		    </td>";
	
	$selectedSets = explode(",",getTypedConf("SelectedSets"));
	$objectsInstances = getFlickrObjectsInstances();

	$activeSet = explode(".",$activeSet);
	$f = $objectsInstances[$activeSet[0]];
	$activeSetInfo = $f->photosets_getInfo($activeSet[1]);
			
	for($i = 0; $i < count($selectedSets); $i++) {
		
		$accountSet = explode(".",$selectedSets[$i]);
  		if(count($accountSet) == 2) {
			$account = $accountSet[0];
			$set = $accountSet[1];
			$f = $objectsInstances[$account];
			$setInfo = $f->photosets_getInfo($set);
			$photoInfo = $f->photos_getInfo($setInfo['primary'],NULL);
			if(substr_count(getTypedConf("SelectedSets"),$selectedSets[$i]) > 0) {
		  		if(isset($selectedSets[$i]) && $setid == $selectedSets[$i]) {
	
	$layout .="			<td>";
	$layout .="				<img class=\"thumbselected\" border=\"0\" src=\"".$f->buildPhotoURL($photoInfo, "square")."\" onmouseover='javascript:document.getElementById(\"activeSet\").innerHTML=\"<b>".$setInfo['title']."</b>\";' onmouseout='javascript:document.getElementById(\"activeSet\").innerHTML=\"<b>".$activeSetInfo['title']."</b>\";' />";
	$layout .="			</td>";
	$layout .="			<td valign=\"middle\">";
	$layout .="				&nbsp;<b>$delimiter</b>&nbsp;</td>";
	$layout .="			</td>";

	  			} else {
		
	$layout .="			<td>";
	$layout .="				<a href='index.php?setid=".$selectedSets[$i]."'>";
	$layout .="					<img class=\"thumb\" border=\"0\" src=\"".$f->buildPhotoURL($photoInfo, "square")."\" onmouseover='javascript:document.getElementById(\"activeSet\").innerHTML=\"<b>".$setInfo['title']."</b>\";' onmouseout='javascript:document.getElementById(\"activeSet\").innerHTML=\"<b>".$activeSetInfo['title']."</b>\";' />";	
	$layout .="				</a>";
	$layout .="			</td>";
	$layout .="			<td valign=\"middle\">";
	$layout .="				&nbsp;<b>$delimiter</b>&nbsp;";
	$layout .="			</td>";

				}
	  		}
		}
	}	

	$layout .="		</tr>";
	$layout .="	</table>";
	$layout .="	<div class=\"body\" align=\"center\" id=\"activeSet\">";
	$layout .="		<b>".$activeSetInfo['title']."</b>";
	$layout .="	</div>";
	
?>